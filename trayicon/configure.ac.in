dnl Process this file with autoconf to produce a configure script.
AC_PREREQ(2.53)

AC_INIT(synce-trayicon, @@VERSION@@)
AC_CONFIG_HEADERS(config.h)
AC_CONFIG_SRCDIR(src/synce-trayicon.c)
AM_INIT_AUTOMAKE

dnl Checks for programs.
AC_PROG_AWK
AC_PROG_CC
AC_PROG_INSTALL
AC_PROG_LN_S
AC_DISABLE_STATIC
AC_PROG_LIBTOOL
AC_PROG_MAKE_SET
AM_PROG_CC_C_O

dnl Check for librapi2
PKG_CHECK_MODULES(LIBRAPI2, librapi2 >= 0.11)
dnl Check for librra
PKG_CHECK_MODULES(LIBRRA, librra >= 0.11)

PKG_CHECK_MODULES(GNOME2, 
				  glib-2.0       \
				  gmodule-2.0    \
				  gtk+-2.0       \
				  libgnome-2.0   \
				  libgnomeui-2.0 \ 
				  libgtop-2.0    \
				  libglade-2.0)
AC_SUBST(GNOME2_CFLAGS)
AC_SUBST(GNOME2_LIBS)

AC_PATH_PROG(GCONFTOOL, gconftool-2)
AM_GCONF_SOURCE_2

dnl Check for D-Bus
PKG_CHECK_MODULES(DBUS, [dbus-1 >= 0.61, dbus-glib-1 >= 0.61],
                    dbus=yes, dbus=no)

dnl Check for Hal
PKG_CHECK_MODULES(HAL, hal)

dnl Check for Gnome Keyring
PKG_CHECK_MODULES(GNOME_KEYRING, gnome-keyring-1)
AC_SUBST(GNOME_KEYRING_CFLAGS)
AC_SUBST(GNOME_KEYRING_LIBS)

PKG_CHECK_MODULES([NOTIFY], [libnotify >= 0.3.0])

dnl Check for liborange
PKG_CHECK_MODULES(LIBORANGE, liborange >= 0.3.2)

dnl Checks for header files.

dnl Checks for typedefs, structures, and compiler characteristics.
AC_C_CONST

ALL_LINGUAS="sv ru"

GETTEXT_PACKAGE=AC_PACKAGE_NAME
AC_SUBST(GETTEXT_PACKAGE)
AC_DEFINE_UNQUOTED(GETTEXT_PACKAGE, "$GETTEXT_PACKAGE", [foo])

AM_GLIB_GNU_GETTEXT
AC_PROG_INTLTOOL

if test "x${prefix}" = "xNONE"; then
	AC_DEFINE_UNQUOTED(LOCALEDIR, "${ac_default_prefix}/${DATADIRNAME}/locale", [Locale dir])
else
	AC_DEFINE_UNQUOTED(LOCALEDIR, "${prefix}/${DATADIRNAME}/locale", [Locale dir])
fi


AC_OUTPUT([
	Makefile
	src/Makefile
	pixmaps/Makefile
	pixmaps/22x22/Makefile
	pixmaps/48x48/Makefile
	data/Makefile
	man/Makefile
	modules/Makefile
	po/Makefile.in
])

