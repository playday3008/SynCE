%define prefix /usr
%define libdir %(pkg-config --variable=libdir gnome-vfs-2.0)
%define sysconfdir /etc
%define name synce-gnomevfs
%define rel 1

Summary: SynCE: GnomeVFS module for accessing PPC Devices.
Name: %{name}
Version: YOU_DID_NOT_RUN_THE_BOOTSTRAP_SCRIPT
Release: %{rel}
License: MIT
Group: Gnome/Libraries
Source: %{name}-%{version}.tar.gz
URL: http://synce.sourceforge.net/
Distribution: SynCE RPM packages
Vendor: The SynCE Project
Packager: Fredrik Nilson <sassur@users.sourceforge.net>
Buildroot: %{_tmppath}/%{name}-%{version}-%{release}-root
#Buildroot: %{_tmppath}/synce-root
Requires: synce-librapi2 gnome-vfs2

%description
Synce-GnomeVFS is part of the SynCE project:

  http://synce.sourceforge.net/

%prep
%setup -q

%build
%configure --with-libsynce=%{prefix} --with-librapi2=%{prefix}
make %{_smp_mflags}

%install
rm -rf %{buildroot}
make install \
	libdir=%{buildroot}%{libdir} \
	sysconfdir=%{buildroot}%{sysconfdir}

%clean
rm -rf %{buildroot}

%files
%defattr(-, root, root)
%doc README LICENSE
%{libdir}/gnome-vfs-2.0/modules/libsyncevfs.so
%{libdir}/gnome-vfs-2.0/modules/libsyncevfs.la
%{libdir}/gnome-vfs-2.0/modules/libsyncevfs.a
%{sysconfdir}/gnome-vfs-2.0/modules/synce-module.conf
