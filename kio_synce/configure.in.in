#MIN_CONFIG(3)

AM_INIT_AUTOMAKE(synce3, 0.1)

dnl CXXFLAGS="$NOOPT_CXXFLAGS" dnl __kdevelop[noopt]__
dnl CFLAGS="$NOOPT_CFLAGS" dnl __kdevelop[noopt]__
dnl CXXFLAGS="$CXXFLAGS $USE_EXCEPTIONS" dnl __kdevelop[exc]__

dnl KDE_NEED_FLEX dnl __kdevelop__
dnl AC_PROG_YACC dnl __kdevelop__

  AC_ARG_WITH(libsynce,
    AC_HELP_STRING(
      [--with-libsynce[=DIR]],
      [Search for libsynce in DIR/include and DIR/lib]),
      [
				CPPFLAGS="$CPPFLAGS -I${withval}/include"
				LDFLAGS="$LDFLAGS -L${withval}/lib"
			]
    )

  AC_ARG_WITH(libsynce-include,
    AC_HELP_STRING(
      [--with-libsynce-include[=DIR]],
      [Search for libsynce header files in DIR]),
      [
				CPPFLAGS="$CPPFLAGS -I${withval}"
			]
    )

  AC_ARG_WITH(libsynce-lib,
    AC_HELP_STRING(
      [--with-libsynce-lib[=DIR]],
      [Search for libsynce library files in DIR]),
      [
				LDFLAGS="$LDFLAGS -L${withval}"
			]
    )

	AC_CHECK_LIB(synce,main,,[
		AC_MSG_ERROR([Can't find synce library])
		])
	AC_CHECK_HEADERS(synce.h,,[
		AC_MSG_ERROR([Can't find synce.h])
		])



  AC_ARG_WITH(librapi2,
    AC_HELP_STRING(
      [--with-librapi2[=DIR]],
      [Search for librapi2 in DIR/include and DIR/lib]),
      [
				CPPFLAGS="$CPPFLAGS -I${withval}/include"
				LDFLAGS="$LDFLAGS -L${withval}/lib"
			]
    )

  AC_ARG_WITH(librapi2-include,
    AC_HELP_STRING(
      [--with-librapi2-include[=DIR]],
      [Search for librapi2 header files in DIR]),
      [
				CPPFLAGS="$CPPFLAGS -I${withval}"
			]
    )

  AC_ARG_WITH(librapi2-lib,
    AC_HELP_STRING(
      [--with-librapi2-lib[=DIR]],
      [Search for librapi2 library files in DIR]),
      [
				LDFLAGS="$LDFLAGS -L${withval}"
			]
    )


	AC_CHECK_LIB(rapi,CeRapiInit,,[
		AC_MSG_ERROR([Can't find RAPI library])
		])
	AC_CHECK_HEADERS(rapi.h,,[
		AC_MSG_ERROR([Can't find rapi.h])
		])


