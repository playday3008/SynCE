#!/bin/sh
SYNCE_DIR=$HOME/.synce

SOUND_DIR=$SYNCE_DIR/sounds
SCRIPT_DIR=$SYNCE_DIR/scripts

CONNECT=$SOUND_DIR/connect.wav
DISCONNECT=$SOUND_DIR/disconnect.wav

SCRIPT=$SCRIPT_DIR/synce-sound-runner.sh

# play is in sox
PLAY=play
# playwave is in SDL_mixer
#PLAY=playwave

case "$1" in

	connect)
		mkdir -p $SOUND_DIR
		if [ ! -f $CONNECT ]; then
			@SYNCE_BINDIR@/pcp ":/Windows/Infbeg.wav" $SOUND_DIR/connect.wav
			@SYNCE_BINDIR@/pcp ":/Windows/Infend.wav" $SOUND_DIR/disconnect.wav
		fi
		$PLAY $CONNECT
		;;
	
	disconnect)
		$PLAY $DISCONNECT
		;;

	start|stop)
		# do nothing
		;;

	install)
		mkdir -p $SCRIPT_DIR
		echo "#!/bin/sh
# Modifications to this file will be lost next time 'synce-sound install' is run
@SYNCE_BINDIR@/synce-sound \$1 &
disown" > $SCRIPT
		chmod 700 $SCRIPT
		;;

	uninstall)
		rm $SCRIPT
		;;

	*)
		echo "Syntax:"
    echo "	$0 install | uninstall | connect | disconnect"
    echo "See man page for details"
		;;
		

esac

