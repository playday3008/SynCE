AC_CHECK_LIB(pthread,pthread_getspecific,
	[
		PTHREAD_LIB="-lpthread"
	],
	[
        	AC_MSG_ERROR([Can't find libpthread])
        	exit
    	]
)

AC_CHECK_LIB(ical,icaltime_convert_to_zone,
	[
		ICAL_LIB="-lical"
	],
	[
		AC_MSG_ERROR(
		[
			Can't find appropriate libical library.
			Please install the latest libicall from
			http://sourceforge.net/projects/freeassociation/
		])
		exit
	],
	[
		$PTHREAD_LIB
	]
)
AC_SUBST(ICAL_LIB)

AC_CHECK_LIB(icalss,icalfileset_new,
	[
		ICALSS_LIB="-licalss"
	],
	[
		AC_MSG_ERROR(
		[
			Can't find appropriate libical library.
			Please install the latest libicall from
			http://sourceforge.net/projects/freeassociation/
		])
		exit
	],
	[
		$ICAL_LIB $PTHREAD_LIB
	]
)
AC_SUBST(ICALSS_LIB)
